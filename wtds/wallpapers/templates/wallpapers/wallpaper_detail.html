{% extends "wallpapers/base.html" %}

{% block title %}Wallpaper: {{ object }}{% endblock title %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/viewing.css" type="text/css" />
{% endblock css %}
{% block javascript %}
    {{ block.super }}
    <script type="text/javascript" src="{{ STATIC_URL }}js/calculate-gcd-javascript.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/resize.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/viewing.js"></script>
{% endblock javascript %}

{% block content %}
    <aside id="details">
        {% if perms.wallpaper.change_wallpaper %}
        <a class="button edit" href="{% url 'wallpapers:edit' object.pk %}">Edit</a>
        {% endif %}
        {% if perms.wallpaper.delete_wallpaper %}
        <a class="button delete" href="{% url 'wallpapers:delete' object.pk %}">Delete</a>
        {% endif %}

        <p class="name{% if not object.name %} hidden{% endif %}">
            <label title="Name"></label>
            <span>{{ object.name }}</span>
        </p>
        <p class="tags">
            <label title="Tags"></label>
            <span>{% include "wallpapers/includes/tags_as_links.html" with tags=object.tags.all only %}</span>
        </p>
        <p class="purity {{ wallpaper.get_purity_rating_display|slugify }}">
            <label title="Purity"></label>
            <span>{{ wallpaper.get_purity_rating_display }}</span>
        </p>
        <p class="size">
            <label title="Dimensions"></label>
            <span>{{ object.width }} &times; {{ object.height }}</span> (<span class="showing"></span>% actual size)
        </p>
        <p class="aspect-ratio">
            <label title="Aspect ratio"></label>
            <span>{{ object.aspect_ratio }}</span>
        </p>
        {% if perms.wallpaper.change_wallpaper and object.tags.all|length == 1 %}
            <p class="message warning">This wallpaper has only one tag.</p>
        {% endif %}

        <div id="similar">
            <h4>Similar by:</h4>
            <div class="related tags">
                <h5>tags</h5>
                {% with similar=object.tags.similar_objects|slice:":2" %}
                    {% include "wallpapers/includes/tile.html" with wallpaper=similar.0 stack=similar.1 only %}
                {% endwith %}
            </div>
            <div class="related color">
                <h5>color</h5>
                {% with similar=object.get_similar_by_color|slice:":2" %}
                    {% include "wallpapers/includes/tile.html" with wallpaper=similar.0 stack=similar.1 only %}
                {% endwith %}
            </div>
            <div class="related size">
                <h5>size</h5>
                {% with similar=object.get_similar_by_size|slice:":2" %}
                    {% include "wallpapers/includes/tile.html" with wallpaper=similar.0 stack=similar.1 only %}
                {% endwith %}
            </div>
            <div class="clear">&nbsp;</div>
        </div>

    </aside>

    <div id="stage" class="wallpaper">
        <img src="{{ object.image.url }}" width="100%" />
    </div>
{% endblock content %}
